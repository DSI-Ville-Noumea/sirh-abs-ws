            ------
            SIRH-ABS-WS API WS doc
            ------



SIRH-ABS-WS API et définition des services concernant les droits

* Gestion des droits d'accès

 <<PROJET>> : SIRH-ABS-WS

 <<URL>> : /droits/listeDroitsAgent
 
 <<Accepted Methods>> : GET
 
  <<Parameters>>
 
 * <<idAgent>> : identifiant de l’agent accédant au module de pointage via le Kiosque (au format 900xxxx ou 90xxxx).

 []

 <<Content>>

+-------------------------+
    {
       "annuler": false,
       "approuverModif": true,
       "approuverVisu": false,
       "droitAcces": true,
       "impression": false,
       "majSolde": false,
       "modification": false,
       "saisie": false,
       "suppression": false,
       "viserModif": false,
       "viserVisu": true,
       "visuSolde": true
    }
+-------------------------+

 <<Response>> : 

+-------------------------+
HTTP Code 200 : OK
HTTP Code 400 : Bad Request (si un des paramètres est manquant)
HTTP Code 404 : Not Found (si l'agent n'existe pas)
+-------------------------+

* Gestion des approbateurs

 <<PROJET>> : SIRH-ABS-WS

 <<URL>> : /droits/approbateurs
 
 <<Accepted Methods>> : GET / POST

 <<Content>>

+-------------------------+
    [
       {
           "codeService": "DCCA",
           "idAgent": 9005138,
           "nom": "CHARVET",
           "prenom": "TATIANA",
           "service": "DSI Service Etudes et Développement",
           "statut": null
       },
       {
           "codeService": "DCCB",
           "idAgent": 9003041,
           "nom": "QUINQUIS",
           "prenom": "CHRISTINE",
           "service": "SED Département Maintenance et Développement",
           "statut": null
       }
    ]
+-------------------------+

 <<Response>> : 

+-------------------------+
HTTP Code 200 : OK
HTTP Code 400 : Bad Request 
+-------------------------+

* Gestion des inputter (operateurs et delegataire)

 <<PROJET>> : SIRH-ABS-WS

 <<URL>> : /droits/inputter
 
 <<Accepted Methods>> : GET /POST
 
  <<Parameters>>
 
 * <<idAgent>> : identifiant de l’agent accédant au module de pointage via le Kiosque (au format 900xxxx ou 90xxxx).

 <<Content>>

+-------------------------+
    {
       "delegataire": null,
       "operateurs":
       [
           {
               "idAgent": 9005131,
               "nom": "SALES",
               "prenom": "ADRIEN"
           }
       ]
    }
+-------------------------+

 <<Response>> : 

+-------------------------+
HTTP Code 200 : OK
HTTP Code 400 : Bad Request 
+-------------------------+

* Gestion des viseurs

 <<PROJET>> : SIRH-ABS-WS

 <<URL>> : /droits/viseur
 
 <<Accepted Methods>> : GET /POST
 
  <<Parameters>>
 
 * <<idAgent>> : identifiant de l’agent accédant au module de pointage via le Kiosque (au format 900xxxx ou 90xxxx).

 <<Content>>

+-------------------------+
    {
	   "viseurs":
	   [
			{
               "idAgent": 9005131,
               "nom": "SALES",
               "prenom": "ADRIEN"
           }
	   ]
    }
+-------------------------+

 <<Response>> : 

+-------------------------+
HTTP Code 200 : OK
HTTP Code 400 : Bad Request 
+-------------------------+

* Gestion des agents approuvés par l'approbateur

 <<PROJET>> : SIRH-ABS-WS

 <<URL>> : /droits/agentsApprouves
 
 <<Accepted Methods>> : GET / POST
 
  <<Parameters>>
 
 * <<idAgent>> : identifiant de l’agent accédant au module de pointage via le Kiosque (au format 900xxxx ou 90xxxx).

 <<Content>>

+-------------------------+
    [
       {
           "idAgent": 9002990,
           "nom": "DEPLANQUE",
           "prenom": "RICHARD"
       }
    ]
+-------------------------+

 <<Response>> : 

+-------------------------+
HTTP Code 200 : OK.
HTTP Code 204 : No Content (si l'agent operateur/viseur n'a pas d'agents à approuver)
HTTP Code 400 : Bad Request 
HTTP Code 403 : Forbidden (l'agent n'est pas approbateur )
+-------------------------+

* Gestion des agents saisie par l'operateur/viseur

 <<PROJET>> : SIRH-ABS-WS

 <<URL>> : /droits/agentsSaisis
 
 <<Accepted Methods>> : GET / POST
 
  <<Parameters>>
 
 * <<idAgent>> : identifiant de l'approbateur connecté (au format 900xxxx ou 90xxxx).
 
 * <<idOperateurOrViseur>> : identifiant de l'opérateur/viseur à qui on ajoute des agents (au format 900xxxx ou 90xxxx).

 <<Content>>

+-------------------------+
    [
       {
           "idAgent": 9002990,
           "nom": "DEPLANQUE",
           "prenom": "RICHARD"
       }
    ]
+-------------------------+

 <<Response>> : 

+-------------------------+
HTTP Code 200 : OK
HTTP Code 204 : No Content (si l'agent operateur/viseur n'a pas d'agents à approuver)
HTTP Code 400 : Bad Request 
HTTP Code 403 : Forbidden (l'agent n'est pas approbateur )
HTTP Code 404 : Not Found (si l'agent operateur/viseur n'existe pas)
+-------------------------+

* Liste des agents hiérarchiquement en dessous de l'approbateur

 <<PROJET>> : SIRH-WS

 <<URL>> : /agents/agentsSubordonnes
 
 <<Accepted Methods>> : GET 
 
  <<Parameters>>
 
 * <<idAgent>> : identifiant de l’agent accédant au module de pointage via le Kiosque (au format 900xxxx ou 90xxxx).
 
 * <<nom>> : paramètre de recherche parmi les agents subordonnés. Paramètre optionnel : sans lui le service retournera la liste complète. Ce paramètre sera utilisé de la manière suivante : AGENT.NOM commence par {nom}
 
 <<Content>>

+-------------------------+
[
	{
		"nom" : "dupont2",
		"prenom" : "michel",
		"idAgent" : 9004568
	},
	{
		"nom" : "dupont3",
		"prenom" : "michel",
		"idAgent" : 9004569
	}
]
+-------------------------+

 <<Response>> : 

+-------------------------+
HTTP Code 200 : OK
HTTP Code 204 : No Content (si l'agent approbateur n'a pas de sous agents)
HTTP Code 400 : Bad Request 
HTTP Code 404 : Not Found (si l'agent connecté ne fait pas partie des agents mairie)
+-------------------------+

* Liste des agents mairie en activité

 <<PROJET>> : SIRH-WS

 <<URL>> : /agents/listeAgentsMairie
 
 <<Accepted Methods>> : GET 
 
  <<Parameters>>
 
 * <<codeService>> : paramètre de recherche parmi les agents mairie. Paramètre optionnel : sans lui le service retournera la liste complète. Ce paramètre sera utilisé de la manière suivante : AGENT.CODE_SERVICE = {codeService}
 
 * <<nom>> : paramètre de recherche parmi les agents mairie. Paramètre optionnel : sans lui le service retournera la liste complète. Ce paramètre sera utilisé de la manière suivante : AGENT.NOM commence par {nom}
 
 <<Content>>

+-------------------------+
[
	{
		"nom" : "dupont2",
		"prenom" : "michel",
		"idAgent" : 9004568
	},
	{
		"nom" : "dupont3",
		"prenom" : "michel",
		"idAgent" : 9004569
	}
]
+-------------------------+

 <<Response>> : 

+-------------------------+
HTTP Code 200 : OK
HTTP Code 400 : Bad Request 
+-------------------------+